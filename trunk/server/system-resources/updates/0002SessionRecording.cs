'From Croquet1.0beta of 11 April 2006 [latest update: #2] on 16 October 2009 at 3:45:40 pm'!!QNetVidTrackStreamer methodsFor: 'testing' stamp: 'jcg 10/15/2009 16:58'!isStreamPaused	^pub isPaused! !!QNetVidServer methodsFor: 'accessing' stamp: 'jcg 10/15/2009 16:55'!streamers	^streamers copy! !!QSessionRecorderPane methodsFor: 'uploading' stamp: 'jcg 10/15/2009 18:02'!startPublishing	| response |	super startPublishing.	response := owner serviceMgr					netvidRecord: 'RecordedSession-', startTimeAndDate					service: owner serviceSvc name					controlStream: videoServer controlStreamID					hubID: owner session hubID.	(response name = #ok) ifFalse: [		| reason |		reason := response contentString.		QLogger logWarning: 'Session-recording: SP request failed because: ', reason.		reason :=			'Session-recording failed.\Server could not start recording because:\', reason.		owner inform: reason withCRs.		^self destroyVideoServer.	].	videoServer future streamers wait		ifNil: [QLogger logWarning: 'no track streamers!!'  "we don't expect to see this"]		ifNotNilDo: [:streamers |			| retries |			retries := 20.			[streamers allSatisfy: [:str | str isStreamPaused not]] whileFalse: [				retries = 0 ifTrue: [					QLogger logWarning: 'waited too long for track-streamers'.					^self				].				owner statusInfo: 'Waiting until server is ready to start recording.'. 				(Delay forMilliseconds: 500) wait.				retries := retries - 1.			].					].! !